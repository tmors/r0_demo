// These constants represent the RISC-V ELF and the image ID generated by risc0-build.
// The ELF is used for proving and the ID is used for verification.
use risc0_zkvm::{default_prover, ExecutorEnv};
use zk_methods::ZKLOGIN_ID;
use risc0_zkvm::Receipt;

fn main() {
    // Let's impor the receipt that was generated by prove

    println!("this is verify zklogin");
    let receipt_path ="./receipt_zklogin.bin".to_string();
    let receipt_file = std::fs::read(receipt_path).unwrap();
    let receipt = bincode::deserialize::<Receipt>(&receipt_file).unwrap();

    let (iss, iat, exp): (String, u64, u64) = receipt.journal.decode().unwrap();

    // todo: add more check depending on the use case
    // 1. check iss is right

	// Let's verify if the receipt that was generated was not created tampered with
    let _verification = match receipt.verify(ZKLOGIN_ID){
        Ok(()) => println!("Proof is Valid"),
        Err(_) => println!("Something went wrong !!"),
    };
}
